{"version":3,"sources":["../../src/DeviceHiveDirectives.js"],"names":["converterManager","templatesRoot","ConverterSelector","me","restrict","templateUrl","scope","onlySelector","onSelect","onBlur","element","attrs","expanded","selectedConverter","converters","getConvertersNameList","onChange","converterName","toggleSelector","Converter","argValues","onDelete","isConverterSelected","showEditPanel","config","getConverterObject","toggleEditPanel","changeConverter","onConverterSelect","getConverterDefaultValuesObject","module","directive"],"mappings":";;;;AAAA;;;;AACA;;;;;;;;AAEA,IAAMA,mBAAmB,gCAAzB;AACA,IAAMC,0EAAN;;IAGMC,iB;AAEF,iCAAc;AAAA;;AACV,YAAMC,KAAK,IAAX;;AAEAA,WAAGC,QAAH,GAAc,GAAd;AACAD,WAAGE,WAAH,GAAoBJ,aAApB;AACAE,WAAGG,KAAH,GAAW;AACPC,0BAAc,GADP;AAEPC,yBAFO;AAGPC;AAHO,SAAX;AAKH;;;;6BAEKH,K,EAAOI,O,EAASC,K,EAAO;AACzBL,kBAAMM,QAAN,GAAiB,KAAjB;AACAN,kBAAMO,iBAAN,GAA0B,IAA1B;AACAP,kBAAMQ,UAAN,GAAmBd,iBAAiBe,qBAAjB,EAAnB;;AAEAT,kBAAMU,QAAN,GAAiB,YAAM;AACnBV,sBAAME,QAAN,CAAe,EAAES,eAAeX,MAAMO,iBAAvB,EAAf;AACAP,sBAAMY,cAAN;AACH,aAHD;;AAKAZ,kBAAMY,cAAN,GAAuB,YAAM;AACzBZ,sBAAMM,QAAN,GAAiB,CAACN,MAAMM,QAAxB;AACAN,sBAAMO,iBAAN,GAA0B,IAA1B;AACH,aAHD;AAIH;;;;;;IAICM,S;AAEF,yBAAc;AAAA;;AACV,YAAMhB,KAAK,IAAX;;AAEAA,WAAGC,QAAH,GAAc,GAAd;AACAD,WAAGE,WAAH,GAAoBJ,aAApB;AACAE,WAAGG,KAAH,GAAW;AACPW,2BAAe,GADR;AAEPG,uBAAW,GAFJ;AAGPC,sBAAU;AAHH,SAAX;AAKH;;;;6BAEKf,K,EAAOI,O,EAASC,K,EAAO;AACzBL,kBAAMgB,mBAAN,GAA4B,IAA5B;AACAhB,kBAAMiB,aAAN,GAAsB,KAAtB;AACAjB,kBAAMkB,MAAN,GAAexB,iBAAiByB,kBAAjB,CAAoCnB,MAAMW,aAA1C,CAAf;;AAEAX,kBAAMoB,eAAN,GAAwB,YAAM;AAC1BpB,sBAAMiB,aAAN,GAAsB,CAACjB,MAAMiB,aAA7B;AACH,aAFD;;AAIAjB,kBAAMqB,eAAN,GAAwB,YAAM;AAC1BrB,sBAAMgB,mBAAN,GAA4B,KAA5B;AACH,aAFD;;AAIAhB,kBAAMsB,iBAAN,GAA0B,UAACX,aAAD,EAAmB;AACzC,oBAAIX,MAAMW,aAAN,KAAwBA,aAA5B,EAA2C;AACvCX,0BAAMW,aAAN,GAAsBA,aAAtB;AACAX,0BAAMkB,MAAN,GAAexB,iBAAiByB,kBAAjB,CAAoCR,aAApC,CAAf;AACAX,0BAAMc,SAAN,GAAkBpB,iBAAiB6B,+BAAjB,CAAiDZ,aAAjD,CAAlB;AACH;;AAEDX,sBAAMgB,mBAAN,GAA4B,IAA5B;AACH,aARD;AASH;;;;;;AAGL,kBACKQ,MADL,CACY,oBADZ,EAEKC,SAFL,CAEe,mBAFf,EAEoC;AAAA,WAAM,IAAI7B,iBAAJ,EAAN;AAAA,CAFpC,EAGK6B,SAHL,CAGe,WAHf,EAG4B;AAAA,WAAM,IAAIZ,SAAJ,EAAN;AAAA,CAH5B","file":"DeviceHiveDirectives.js","sourcesContent":["import angular from 'angular';\nimport ConverterManager from './ConverterManager.js';\n\nconst converterManager = new ConverterManager();\nconst templatesRoot = `public/plugins/devicehive-devicehive-datasource/partials`;\n\n\nclass ConverterSelector {\n\n    constructor() {\n        const me = this;\n\n        me.restrict = 'E';\n        me.templateUrl = `${templatesRoot}/converter.selector.html`;\n        me.scope = {\n            onlySelector: '@',\n            onSelect: `&`,\n            onBlur: `&`\n        }\n    }\n\n    link (scope, element, attrs) {\n        scope.expanded = false;\n        scope.selectedConverter = null;\n        scope.converters = converterManager.getConvertersNameList();\n\n        scope.onChange = () => {\n            scope.onSelect({ converterName: scope.selectedConverter });\n            scope.toggleSelector();\n        };\n\n        scope.toggleSelector = () => {\n            scope.expanded = !scope.expanded;\n            scope.selectedConverter = null;\n        };\n    }\n}\n\n\nclass Converter {\n\n    constructor() {\n        const me = this;\n\n        me.restrict = 'E';\n        me.templateUrl = `${templatesRoot}/converter.html`;\n        me.scope = {\n            converterName: '=',\n            argValues: '=',\n            onDelete: '&'\n        }\n    }\n\n    link (scope, element, attrs) {\n        scope.isConverterSelected = true;\n        scope.showEditPanel = false;\n        scope.config = converterManager.getConverterObject(scope.converterName);\n\n        scope.toggleEditPanel = () => {\n            scope.showEditPanel = !scope.showEditPanel;\n        };\n\n        scope.changeConverter = () => {\n            scope.isConverterSelected = false;\n        };\n\n        scope.onConverterSelect = (converterName) => {\n            if (scope.converterName !== converterName) {\n                scope.converterName = converterName;\n                scope.config = converterManager.getConverterObject(converterName);\n                scope.argValues = converterManager.getConverterDefaultValuesObject(converterName);\n            }\n\n            scope.isConverterSelected = true;\n        };\n    }\n}\n\nangular\n    .module('grafana.directives')\n    .directive('converterSelector', () => new ConverterSelector)\n    .directive('converter', () => new Converter);"]}